<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1883px" preserveAspectRatio="none" style="width:1508px;height:1883px;" version="1.1" viewBox="0 0 1508 1883" width="1508px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ayu1teped6ir" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="302.7891"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="403.1875"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="503.5859"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="561.8516"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="662.25"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="836.0469"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="1095.1094"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="1622.1016"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="720.5156"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="894.3125"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="994.7109"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1253.7734"/><rect fill="#FFBBBB" filter="url(#f1ayu1teped6ir)" height="1577.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="712" y="231.5234"/><rect fill="#FFDDCC" filter="url(#f1ayu1teped6ir)" height="1474.8438" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="717" y="268.5234"/><rect fill="#FFBFDD" filter="url(#f1ayu1teped6ir)" height="98.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="722" y="1219.375"/><rect fill="#CCBBBB" filter="url(#f1ayu1teped6ir)" height="324.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="722" y="1362.0391"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="1657.1719" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1214" y="151.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="105" x2="105" y1="54.5938" y2="1826.8984"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="300" x2="300" y1="54.5938" y2="1826.8984"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="717" x2="717" y1="54.5938" y2="1826.8984"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1219" x2="1219" y1="54.5938" y2="1826.8984"/><rect fill="#FEFECE" filter="url(#f1ayu1teped6ir)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="28" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="35" y="39.292">Interface Descriptor</text><rect fill="#FEFECE" filter="url(#f1ayu1teped6ir)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="28" y="1825.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="35" y="1845.8936">Interface Descriptor</text><rect fill="#FEFECE" filter="url(#f1ayu1teped6ir)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="232" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="239" y="39.292">Route Descriptor</text><rect fill="#FEFECE" filter="url(#f1ayu1teped6ir)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="232" y="1825.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="239" y="1845.8936">Route Descriptor</text><rect fill="#FEFECE" filter="url(#f1ayu1teped6ir)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="664" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="671" y="39.292">KVScheduler</text><rect fill="#FEFECE" filter="url(#f1ayu1teped6ir)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="664" y="1825.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="671" y="1845.8936">KVScheduler</text><rect fill="#FEFECE" filter="url(#f1ayu1teped6ir)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1152" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1171.5" y="22.9951">Orchestrator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1159" y="39.292">(NB COLLAPSED)</text><rect fill="#FEFECE" filter="url(#f1ayu1teped6ir)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1152" y="1825.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1171.5" y="1845.8936">Orchestrator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1159" y="1862.1904">(NB COLLAPSED)</text><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="302.7891"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="403.1875"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="503.5859"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="561.8516"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="662.25"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="836.0469"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="1095.1094"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="1622.1016"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="720.5156"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="894.3125"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="994.7109"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1253.7734"/><rect fill="#FFBBBB" filter="url(#f1ayu1teped6ir)" height="1577.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="712" y="231.5234"/><rect fill="#FFDDCC" filter="url(#f1ayu1teped6ir)" height="1474.8438" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="717" y="268.5234"/><rect fill="#FFBFDD" filter="url(#f1ayu1teped6ir)" height="98.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="722" y="1219.375"/><rect fill="#CCBBBB" filter="url(#f1ayu1teped6ir)" height="324.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="722" y="1362.0391"/><rect fill="#FFFFFF" filter="url(#f1ayu1teped6ir)" height="1657.1719" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1214" y="151.7266"/><rect fill="#EEEEEE" filter="url(#f1ayu1teped6ir)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1493" x="3" y="85.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1496" y1="85.1602" y2="85.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1496" y1="88.1602" y2="88.1602"/><rect fill="#EEEEEE" filter="url(#f1ayu1teped6ir)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="630" x="434.5" y="74.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="417" x="440.5" y="90.6606">Data-Change Transaction with Revert enabled (interface</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="862.5" y="90.6606">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="919.5" y="90.6606">+ route</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="979.5" y="90.6606">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="6" x="1045.5" y="90.6606">)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1219" x2="1266" y1="138.9922" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1266" x2="1266" y1="138.9922" y2="151.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1225" x2="1266" y1="151.9922" y2="151.9922"/><polygon fill="#A80036" points="1235,147.9922,1225,151.9922,1235,155.9922,1231,151.9922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="1231" y="118.7935">trigger transaction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1374" y="118.7935">received from NB</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1231" y="133.9263">(localclient or GRPC)</text><polygon fill="#A80036" points="733,227.5234,723,231.5234,733,235.5234,729,231.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="1213" y1="231.5234" y2="231.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="280" x="816" y="181.0591">Data-Change Txn with Revert enabled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="1100" y="181.0591">= [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="820" y="196.1919">- interface</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="893" y="196.1919">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="939" y="196.1919">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="820" y="211.3247">- route</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="867" y="211.3247">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="930" y="211.3247"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="816" y="226.4575">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="722" x2="769" y1="255.6563" y2="255.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="769" x2="769" y1="255.6563" y2="268.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="769" y1="268.6563" y2="268.6563"/><polygon fill="#A80036" points="738,264.6563,728,268.6563,738,272.6563,734,268.6563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="734" y="250.5903">start txn</text><polygon fill="#A80036" points="121,298.7891,111,302.7891,121,306.7891,117,302.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="716" y1="302.7891" y2="302.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="342" y="297.7231">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="429" y="297.7231">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="434" y="297.7231">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="480" y="297.7231">)</text><polygon fill="#A80036" points="705,327.9219,715,331.9219,705,335.9219,709,331.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="711" y1="331.9219" y2="331.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="398" y="326.856">true</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="769" y1="361.0547" y2="361.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="769" x2="769" y1="361.0547" y2="374.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="769" y1="374.0547" y2="374.0547"/><polygon fill="#A80036" points="738,370.0547,728,374.0547,738,378.0547,734,374.0547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="734" y="355.9888">value is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="790" y="355.9888">handled by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="877" y="355.9888">InterfaceDescriptor</text><polygon fill="#A80036" points="121,399.1875,111,403.1875,121,407.1875,117,403.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="716" y1="403.1875" y2="403.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="333" y="398.1216">Dependencies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="438" y="398.1216">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="443" y="398.1216">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="489" y="398.1216">)</text><polygon fill="#A80036" points="705,428.3203,715,432.3203,705,436.3203,709,432.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="711" y1="432.3203" y2="432.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="330.5" y="427.2544">&lt;&lt; no dependencies &gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="769" y1="461.4531" y2="461.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="769" x2="769" y1="461.4531" y2="474.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="769" y1="474.4531" y2="474.4531"/><polygon fill="#A80036" points="738,470.4531,728,474.4531,738,478.4531,734,474.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="734" y="456.3872">value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="772" y="456.3872">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="822" y="456.3872">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="836" y="456.3872">ready</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="882" y="456.3872">to be created</text><polygon fill="#A80036" points="121,499.5859,111,503.5859,121,507.5859,117,503.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="716" y1="503.5859" y2="503.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="361" y="498.52">Create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="410" y="498.52">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="415" y="498.52">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="461" y="498.52">)</text><polygon fill="#A80036" points="705,528.7188,715,532.7188,705,536.7188,709,532.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="711" y1="532.7188" y2="532.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="14" x="404" y="527.6528">nil</text><polygon fill="#A80036" points="121,557.8516,111,561.8516,121,565.8516,117,561.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="716" y1="561.8516" y2="561.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="332.5" y="556.7856">DerivedValues</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="438.5" y="556.7856">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="443.5" y="556.7856">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="489.5" y="556.7856">)</text><polygon fill="#A80036" points="705,586.9844,715,590.9844,705,594.9844,709,590.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="711" y1="590.9844" y2="590.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="242.5" y="585.9185">derived-values = [</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="363.5" y="585.9185">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="574.5" y="585.9185">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="769" y1="620.1172" y2="620.1172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="769" x2="769" y1="620.1172" y2="633.1172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="769" y1="633.1172" y2="633.1172"/><polygon fill="#A80036" points="738,629.1172,728,633.1172,738,637.1172,734,633.1172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="734" y="615.0513">schedule create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="856" y="615.0513">for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="877" y="615.0513">"address/my-tap/192.168.1.1/24"</text><polygon fill="#A80036" points="121,658.25,111,662.25,121,666.25,117,662.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="716" y1="662.25" y2="662.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="259.5" y="657.1841">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="346.5" y="657.1841">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="351.5" y="657.1841">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="562.5" y="657.1841">)</text><polygon fill="#A80036" points="705,687.3828,715,691.3828,705,695.3828,709,691.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="711" y1="691.3828" y2="691.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="396" y="686.3169">false</text><polygon fill="#A80036" points="316,716.5156,306,720.5156,316,724.5156,312,720.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="716" y1="720.5156" y2="720.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="357" y="715.4497">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="444" y="715.4497">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="449" y="715.4497">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="660" y="715.4497">)</text><polygon fill="#A80036" points="705,745.6484,715,749.6484,705,753.6484,709,749.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="711" y1="749.6484" y2="749.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="493.5" y="744.5825">false</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="769" y1="793.9141" y2="793.9141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="769" x2="769" y1="793.9141" y2="806.9141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="769" y1="806.9141" y2="806.9141"/><polygon fill="#A80036" points="738,802.9141,728,806.9141,738,810.9141,734,806.9141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="734" y="773.7153">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="949" y="773.7153">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="963" y="773.7153">property</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1031" y="773.7153"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="738" y="788.8481">(without CRUD operations)</text><polygon fill="#A80036" points="121,832.0469,111,836.0469,121,840.0469,117,836.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="716" y1="836.0469" y2="836.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="335.5" y="830.981">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="422.5" y="830.981">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="427.5" y="830.981">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="486.5" y="830.981">)</text><polygon fill="#A80036" points="705,861.1797,715,865.1797,705,869.1797,709,865.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="711" y1="865.1797" y2="865.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="396" y="860.1138">false</text><polygon fill="#A80036" points="316,890.3125,306,894.3125,316,898.3125,312,894.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="716" y1="894.3125" y2="894.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="433" y="889.2466">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="520" y="889.2466">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="525" y="889.2466">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="584" y="889.2466">)</text><polygon fill="#A80036" points="705,919.4453,715,923.4453,705,927.4453,709,923.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="711" y1="923.4453" y2="923.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="495.5" y="918.3794">true</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="769" y1="952.5781" y2="952.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="769" x2="769" y1="952.5781" y2="965.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="769" y1="965.5781" y2="965.5781"/><polygon fill="#A80036" points="738,961.5781,728,965.5781,738,969.5781,734,965.5781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="734" y="947.5122">value is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="790" y="947.5122">handled by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="877" y="947.5122">RouteDescriptor</text><polygon fill="#A80036" points="316,990.7109,306,994.7109,316,998.7109,312,994.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="716" y1="994.7109" y2="994.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="424" y="989.645">Dependencies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="529" y="989.645">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="534" y="989.645">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="593" y="989.645">)</text><polygon fill="#A80036" points="705,1019.8438,715,1023.8438,705,1027.8438,709,1023.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="711" y1="1023.8438" y2="1023.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="373" y="1018.7778">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="436" y="1018.7778"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88" x="436" y="1018.7778">depends on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="528" y="1018.7778">(interface)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="598" y="1018.7778">my-tap</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="769" y1="1052.9766" y2="1052.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="769" x2="769" y1="1052.9766" y2="1065.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="769" y1="1065.9766" y2="1065.9766"/><polygon fill="#A80036" points="738,1061.9766,728,1065.9766,738,1069.9766,734,1065.9766" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="734" y="1047.9106">value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="772" y="1047.9106">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="835" y="1047.9106">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="849" y="1047.9106">ready</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="895" y="1047.9106">to be created</text><polygon fill="#A80036" points="121,1091.1094,111,1095.1094,121,1099.1094,117,1095.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="716" y1="1095.1094" y2="1095.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="354.5" y="1090.0435">Create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="403.5" y="1090.0435">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="408.5" y="1090.0435">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="467.5" y="1090.0435">)</text><polygon fill="#A80036" points="705,1120.2422,715,1124.2422,705,1128.2422,709,1124.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="711" y1="1124.2422" y2="1124.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="395.5" y="1119.1763">error</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="96" x2="114" y1="1115.2422" y2="1133.2422"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="96" x2="114" y1="1133.2422" y2="1115.2422"/><rect fill="#EEEEEE" filter="url(#f1ayu1teped6ir)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1493" x="3" y="1152.8086"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1496" y1="1152.8086" y2="1152.8086"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1496" y1="1155.8086" y2="1155.8086"/><rect fill="#EEEEEE" filter="url(#f1ayu1teped6ir)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="405" x="547" y="1142.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="386" x="553" y="1158.3091">Transaction failed, revert already executed changes</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="774" y1="1206.6406" y2="1206.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="774" x2="774" y1="1206.6406" y2="1219.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="733" x2="774" y1="1219.6406" y2="1219.6406"/><polygon fill="#A80036" points="743,1215.6406,733,1219.6406,743,1223.6406,739,1219.6406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="739" y="1186.4419">Refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="800" y="1186.4419">the failed value to learn its state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="743" y="1201.5747">- needed to determine the revert operation</text><polygon fill="#A80036" points="316,1249.7734,306,1253.7734,316,1257.7734,312,1253.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="721" y1="1253.7734" y2="1253.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="478" y="1248.7075">Retrieve</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="539" y="1248.7075">()</text><polygon fill="#A80036" points="710,1278.9063,720,1282.9063,710,1286.9063,714,1282.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="716" y1="1282.9063" y2="1282.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="319.5" y="1277.8403">&lt;&lt; no retrieved routes &gt;&gt; (nothing to revert for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="638.5" y="1277.8403">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="697.5" y="1277.8403">)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="732" x2="774" y1="1317.0391" y2="1317.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="774" x2="774" y1="1317.0391" y2="1330.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="774" y1="1330.0391" y2="1330.0391"/><polygon fill="#A80036" points="737,1326.0391,727,1330.0391,737,1334.0391,733,1330.0391" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163" x="739" y="1311.9731">save refreshed values</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="774" y1="1349.1719" y2="1349.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="774" x2="774" y1="1349.1719" y2="1362.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="733" x2="774" y1="1362.1719" y2="1362.1719"/><polygon fill="#A80036" points="743,1358.1719,733,1362.1719,743,1366.1719,739,1362.1719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="739" y="1344.106">undo Create (i.e.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="850" y="1344.106">Delete</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="898" y="1344.106">) of</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="923" y="1344.106">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="973" y="1344.106">interface</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="732" x2="774" y1="1396.3047" y2="1396.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="774" x2="774" y1="1396.3047" y2="1409.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="733" x2="774" y1="1409.3047" y2="1409.3047"/><polygon fill="#A80036" points="743,1405.3047,733,1409.3047,743,1413.3047,739,1409.3047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="739" y="1391.2388">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="744" y="1391.2388">cached</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="797" y="1391.2388">) value is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="862" y="1391.2388">handled by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="949" y="1391.2388">InterfaceDescriptor</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="732" x2="774" y1="1438.4375" y2="1438.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="774" x2="774" y1="1438.4375" y2="1451.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="733" x2="774" y1="1451.4375" y2="1451.4375"/><polygon fill="#A80036" points="743,1447.4375,733,1451.4375,743,1455.4375,739,1451.4375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="739" y="1433.3716">remove derived values of</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="908" y="1433.3716">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="958" y="1433.3716">first (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="991" y="1433.3716">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1202" y="1433.3716">)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="732" x2="774" y1="1480.5703" y2="1480.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="774" x2="774" y1="1480.5703" y2="1493.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="733" x2="774" y1="1493.5703" y2="1493.5703"/><polygon fill="#A80036" points="743,1489.5703,733,1493.5703,743,1497.5703,739,1493.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="739" y="1475.5044">apply</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="777" y="1475.5044">Delete()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="841" y="1475.5044">for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="862" y="1475.5044">"address/my-tap/192.168.1.1/24"</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="732" x2="774" y1="1537.8359" y2="1537.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="774" x2="774" y1="1537.8359" y2="1550.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="733" x2="774" y1="1550.8359" y2="1550.8359"/><polygon fill="#A80036" points="743,1546.8359,733,1550.8359,743,1554.8359,739,1550.8359" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="739" y="1517.6372">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="744" y="1517.6372">cached</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="797" y="1517.6372">)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="806" y="1517.6372">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="1021" y="1517.6372">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="1035" y="1517.6372">property</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1103" y="1517.6372"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="743" y="1532.77">(no Delete operation to execute)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="732" x2="774" y1="1579.9688" y2="1579.9688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="774" x2="774" y1="1579.9688" y2="1592.9688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="733" x2="774" y1="1592.9688" y2="1592.9688"/><polygon fill="#A80036" points="743,1588.9688,733,1592.9688,743,1596.9688,739,1592.9688" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="739" y="1574.9028">removed value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="838" y="1574.9028">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1053" y="1574.9028">from the graph</text><polygon fill="#A80036" points="121,1618.1016,111,1622.1016,121,1626.1016,117,1622.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="721" y1="1622.1016" y2="1622.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="364" y="1617.0356">Delete</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="412" y="1617.0356">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="417" y="1617.0356">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="463" y="1617.0356">)</text><polygon fill="#A80036" points="710,1647.2344,720,1651.2344,710,1655.2344,714,1651.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="716" y1="1651.2344" y2="1651.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="406" y="1646.1685">ok</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="732" x2="774" y1="1685.3672" y2="1685.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="774" x2="774" y1="1685.3672" y2="1698.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="774" y1="1698.3672" y2="1698.3672"/><polygon fill="#A80036" points="737,1694.3672,727,1698.3672,737,1702.3672,733,1698.3672" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="739" y="1680.3013">removed value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="842" y="1680.3013">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="892" y="1680.3013">from the graph</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="769" y1="1742.6328" y2="1742.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="769" x2="769" y1="1742.6328" y2="1755.6328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="722" x2="769" y1="1755.6328" y2="1755.6328"/><polygon fill="#A80036" points="732,1751.6328,722,1755.6328,732,1759.6328,728,1755.6328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="734" y="1722.4341">finalize and record txn #1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="930" y="1722.4341"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="734" y="1737.5669">(reverted - ends with no visible effect)</text><polygon fill="#A80036" points="1202,1775.7656,1212,1779.7656,1202,1783.7656,1206,1779.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="722" x2="1208" y1="1779.7656" y2="1779.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="894" y="1774.6997">value state updates</text><polygon fill="#A80036" points="1207,1804.8984,1217,1808.8984,1207,1812.8984,1211,1808.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="717" x2="1213" y1="1808.8984" y2="1808.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="907.5" y="1803.8325">txn error</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="975.5" y="1803.8325">(non-nil)</text><!--
@startuml

skinparam ParticipantPadding 20
skinparam BoxPadding 10
skinparam SequenceMessageAlign center

participant ID as "Interface Descriptor"
participant RD as "Route Descriptor"
participant KVS as "KVScheduler"
participant ORCH as "Orchestrator \n(NB COLLAPSED)"

== Data-Change Transaction with Revert enabled (interface //my-tap// + route //my-route//) ==

ORCH -> ORCH: **trigger transaction** received from NB \n(localclient or GRPC)
activate ORCH
ORCH -> KVS: **Data-Change Txn with Revert enabled** = [\l - interface  //my-tap//, \l - route //my-route// \l]
activate KVS  #FFBBBB

KVS -> KVS: **start txn**
 activate KVS  #FFDDCC
  KVS -> ID: **KeySelector**(//my-tap//)
   activate ID
    ID - -> KVS: true
   deactivate ID
  KVS -> KVS: value is  **handled by** InterfaceDescriptor
  KVS -> ID: **Dependencies**(//my-tap//)
   activate ID
    ID - -> KVS: << no dependencies >>
   deactivate ID
  KVS -> KVS: value //my-tap// is **ready** to be created
  KVS -> ID: **Create**(//my-tap//)
  activate ID
   ID - -> KVS: nil
  deactivate ID

  KVS -> ID: **DerivedValues**(//my-tap//)
   activate ID
    ID - -> KVS: derived-values = [ //"address/my-tap/192.168.1.1/24"//]
   deactivate ID
   KVS -> KVS: **schedule create** for //"address/my-tap/192.168.1.1/24"//
   KVS -> ID: **KeySelector**(//"address/my-tap/192.168.1.1/24"//)
   activate ID
    ID - -> KVS: false
   deactivate ID
   KVS -> RD: **KeySelector**(//"address/my-tap/192.168.1.1/24"//)
   activate RD
    RD - -> KVS: false
   deactivate RD
  KVS -> KVS: //"address/my-tap/192.168.1.1/24"// is **property** \n (without CRUD operations)

  KVS -> ID: **KeySelector**(//my-route//)
   activate ID
    ID - -> KVS: false
   deactivate ID
  KVS -> RD: **KeySelector**(//my-route//)
   activate RD
    RD - -> KVS: true
   deactivate RD
  KVS -> KVS: value is  **handled by** RouteDescriptor
  KVS -> RD: **Dependencies**(//my-route//)
   activate RD
    RD - -> KVS: //my-route// **depends on** (interface) //my-tap//
   deactivate RD
  KVS -> KVS: value //my-route// is **ready** to be created

  KVS -> ID: **Create**(//my-route//)
   activate ID
    ID - -> KVS: error
   destroy ID

== Transaction failed, revert already executed changes ==

  KVS -> KVS: **Refresh** the failed value to learn its state \n - needed to determine the revert operation
   activate KVS  #FFBFDD
    KVS -> RD: **Retrieve**()
     activate RD
      RD - -> KVS: << no retrieved routes >> (nothing to revert for  //my-route//)
     deactivate RD
    KVS -> KVS: **save refreshed values**
   deactivate KVS

  KVS -> KVS: undo Create (i.e. **Delete**) of //my-tap// interface
   activate KVS #CCBBBB
    KVS -> KVS: (**cached**) value is  **handled by** InterfaceDescriptor
    KVS -> KVS: remove derived values of  //my-tap// first (//"address/my-tap/192.168.1.1/24"//)
    KVS -> KVS: apply **Delete()** for //"address/my-tap/192.168.1.1/24"//
    KVS -> KVS: (**cached**) //"address/my-tap/192.168.1.1/24"// is **property** \n (no Delete operation to execute)
    KVS -> KVS: removed value //"address/my-tap/192.168.1.1/24"// from the graph
    KVS -> ID: **Delete**(//my-tap//)
     activate ID
      ID - -> KVS: ok
     deactivate ID
    KVS -> KVS: removed value  //my-tap// from the graph
   deactivate KVS

  KVS -> KVS: **finalize and record txn #1** \n(reverted - ends with no visible effect)
 deactivate KVS
KVS - -> ORCH: **value state updates**
KVS - -> ORCH: **txn error** (non-nil)
deactivate KVS
deactivate ORCH

@enduml

PlantUML version 1.2018.11(Sat Sep 22 18:43:53 CEST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1024-b11
Operating System: Linux
OS Version: 4.10.0-28-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>